<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MuPDFCore: MuPDFCore/MuPDFMultiThreadedPageRenderer.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="Doxy.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MuPDFCore
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
   <div id="projectbrief">Multiplatform .NET Core bindings for MuPDF</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_mu_p_d_f_multi_threaded_page_renderer_8cs_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MuPDFMultiThreadedPageRenderer.cs</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">    MuPDFCore - A set of multiplatform .NET Core bindings for MuPDF.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">    Copyright (C) 2020  Giorgio Bianchini</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">    it under the terms of the GNU Affero General Public License as</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    published by the Free Software Foundation, version 3.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">    This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    GNU Affero General Public License for more details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">using</span> System;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using</span> System.Linq;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using</span> System.Runtime.InteropServices;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using</span> System.Threading;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_mu_p_d_f_core.html">MuPDFCore</a></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{<span class="comment"></span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">    /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">    /// A reusable thread to render part of an image.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">    /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"></span>    <span class="keyword">internal</span> <span class="keyword">class </span>RenderingThread : IDisposable</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    {<span class="comment"></span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">        /// A class to hold the data used internally by the rendering thread.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> <span class="keyword">class </span>RenderData</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            <span class="keyword">public</span> IntPtr Context;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            <span class="keyword">public</span> MuPDFDisplayList DisplayList;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            <span class="keyword">public</span> Rectangle Region;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">float</span> Zoom;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            <span class="keyword">public</span> IntPtr PixelStorage;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            <span class="keyword">public</span> Rectangle PageBounds;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            <span class="keyword">public</span> <a class="code" href="namespace_mu_p_d_f_core.html#ade1eb4d4f9c9c8a66bde9152ea9e41bb">PixelFormats</a> PixelFormat;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">bool</span> ClipToPageBounds;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        }</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">        /// A lock object to prevent race conditions.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> readonly <span class="keywordtype">object</span> RenderDataLock;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">        /// The data used internally by the rendering thread.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> readonly RenderData CurrentRenderData;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">        /// The actual thread that does the rendering.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> readonly Thread Thread;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">        /// An &lt;see cref=&quot;EventWaitHandle&quot;/&gt; that is set by the &lt;see cref=&quot;Thread&quot;/&gt; when it finished rendering.</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> readonly EventWaitHandle SignalFromThread;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">        /// An &lt;see cref=&quot;EventWaitHandle&quot;/&gt; that signals to the &lt;see cref=&quot;Thread&quot;/&gt; that it should start rendering.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> readonly EventWaitHandle SignalToThread;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">        /// An &lt;see cref=&quot;EventWaitHandle&quot;/&gt; that signals that the object is being disposed and all activity should cease.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> readonly EventWaitHandle DisposeSignal;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">        /// A pointer to a &lt;see cref=&quot;Cookie&quot;/&gt; object that can be used to monitor the progress of the rendering or to abort it.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> readonly IntPtr Cookie;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">        /// Performs the actual rendering.</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> <span class="keywordtype">void</span> RenderAction()</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <a class="code" href="namespace_mu_p_d_f_core.html#aa6919d62a772f0334777d47f9c2d6c59">ExitCodes</a> result = (<a class="code" href="namespace_mu_p_d_f_core.html#aa6919d62a772f0334777d47f9c2d6c59">ExitCodes</a>)NativeMethods.RenderSubDisplayList(<span class="keyword">this</span>.CurrentRenderData.Context, <span class="keyword">this</span>.CurrentRenderData.DisplayList.NativeDisplayList, <span class="keyword">this</span>.CurrentRenderData.Region.X0, <span class="keyword">this</span>.CurrentRenderData.Region.Y0, <span class="keyword">this</span>.CurrentRenderData.Region.X1, <span class="keyword">this</span>.CurrentRenderData.Region.Y1, <span class="keyword">this</span>.CurrentRenderData.Zoom, (<span class="keywordtype">int</span>)this.CurrentRenderData.PixelFormat, this.CurrentRenderData.PixelStorage, Cookie);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="keywordflow">switch</span> (result)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="namespace_mu_p_d_f_core.html#aa6919d62a772f0334777d47f9c2d6c59">ExitCodes</a>.EXIT_SUCCESS:</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="namespace_mu_p_d_f_core.html#aa6919d62a772f0334777d47f9c2d6c59">ExitCodes</a>.ERR_CANNOT_RENDER:</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> MuPDFException(<span class="stringliteral">&quot;Cannot render page&quot;</span>, result);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> MuPDFException(<span class="stringliteral">&quot;Unknown error&quot;</span>, result);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="keywordflow">if</span> (this.CurrentRenderData.ClipToPageBounds &amp;&amp; !<span class="keyword">this</span>.CurrentRenderData.PageBounds.Contains(<span class="keyword">this</span>.CurrentRenderData.DisplayList.Bounds.Intersect(<span class="keyword">this</span>.CurrentRenderData.Region)))</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                RoundedRectangle roundedRegion = this.CurrentRenderData.Region.Round(this.CurrentRenderData.Zoom);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                Utils.ClipImage(this.CurrentRenderData.PixelStorage, <span class="keyword">new</span> RoundedSize(roundedRegion.Width, roundedRegion.Height), <span class="keyword">this</span>.CurrentRenderData.Region, <span class="keyword">this</span>.CurrentRenderData.PageBounds, <span class="keyword">this</span>.CurrentRenderData.PixelFormat);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">        /// Create a new &lt;see cref=&quot;RenderingThread&quot;/&gt; instance.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"></span>        <span class="keyword">public</span> RenderingThread()</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="comment">//Initialize fields</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            SignalFromThread = <span class="keyword">new</span> EventWaitHandle(<span class="keyword">false</span>, EventResetMode.ManualReset);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            SignalToThread = <span class="keyword">new</span> EventWaitHandle(<span class="keyword">false</span>, EventResetMode.ManualReset);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            DisposeSignal = <span class="keyword">new</span> EventWaitHandle(<span class="keyword">false</span>, EventResetMode.ManualReset);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            CurrentRenderData = <span class="keyword">new</span> RenderData();</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            RenderDataLock = <span class="keyword">new</span> object();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="comment">//Allocate unmanaged memory to hold the cookie.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            Cookie = Marshal.AllocHGlobal(Marshal.SizeOf&lt;<a class="code" href="namespace_mu_p_d_f_core.html">MuPDFCore</a>.<a class="code" href="struct_mu_p_d_f_core_1_1_cookie.html">Cookie</a>&gt;());</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="comment">//Initialise the rendering thread.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            this.Thread = <span class="keyword">new</span> Thread(() =&gt;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                EventWaitHandle[] handles = <span class="keyword">new</span> EventWaitHandle[] { SignalToThread, DisposeSignal };</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                    <span class="keywordtype">int</span> handle = EventWaitHandle.WaitAny(handles);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                    <span class="keywordflow">if</span> (handle == 0)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                    {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                        SignalToThread.Reset();</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                        lock (RenderDataLock)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                        {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                            this.RenderAction();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                        }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                        SignalFromThread.Set();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                    {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        SignalFromThread.Set();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            });</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="comment">//Start the rendering thread.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            this.Thread.Start();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">        /// Start rendering a region of a display list to the specified destination.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">        /// &lt;param name=&quot;context&quot;&gt;The rendering context.&lt;/param&gt;</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">        /// &lt;param name=&quot;displayList&quot;&gt;The native display list that should be rendered.&lt;/param&gt;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">        /// &lt;param name=&quot;region&quot;&gt;The region that should be rendered.&lt;/param&gt;</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">        /// &lt;param name=&quot;zoom&quot;&gt;The scale at which the region will be rendered. This will determine the size in pixel of the image.&lt;/param&gt;</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">        /// &lt;param name=&quot;pixelStorage&quot;&gt;The address of the buffer where the pixel data will be written. There must be enough space available to write the values for all the pixels, otherwise this will fail catastrophically!&lt;/param&gt;</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">        /// &lt;param name=&quot;pixelFormat&quot;&gt;The format of the pixel data.&lt;/param&gt;</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">        /// &lt;param name=&quot;pageBounds&quot;&gt;The bounds of the page being rendererd.&lt;/param&gt;</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">        /// &lt;param name=&quot;clipToPageBounds&quot;&gt;A boolean value indicating whether the rendered image should be clipped to the original page&#39;s bounds. This can be relevant if the page has been &quot;cropped&quot; by altering its mediabox, but otherwise leaving the contents untouched.&lt;/param&gt;</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> Render(IntPtr context, MuPDFDisplayList displayList, Rectangle region, <span class="keywordtype">float</span> zoom, IntPtr pixelStorage, <a class="code" href="namespace_mu_p_d_f_core.html#ade1eb4d4f9c9c8a66bde9152ea9e41bb">PixelFormats</a> pixelFormat, Rectangle pageBounds, <span class="keywordtype">bool</span> clipToPageBounds)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            lock (RenderDataLock)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <span class="comment">//Reset the cookie.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                unsafe</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                    Cookie* cookie = (Cookie*)Cookie;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                    cookie-&gt;abort = 0;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                    cookie-&gt;errors = 0;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                    cookie-&gt;incomplete = 0;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                    cookie-&gt;progress = 0;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                    cookie-&gt;progress_max = 0;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <span class="comment">//Set up all the rendering data.</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                CurrentRenderData.Context = context;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                CurrentRenderData.DisplayList = displayList;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                CurrentRenderData.Region = region;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                CurrentRenderData.Zoom = zoom;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                CurrentRenderData.PixelStorage = pixelStorage;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                CurrentRenderData.PixelFormat = pixelFormat;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                CurrentRenderData.PageBounds = pageBounds;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                CurrentRenderData.ClipToPageBounds = clipToPageBounds;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                SignalToThread.Set();</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">        /// Wait until the current rendering operation finishes.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> WaitForRendering()</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            EventWaitHandle[] handles = <span class="keyword">new</span> EventWaitHandle[] { SignalFromThread, DisposeSignal };</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordtype">int</span> result = EventWaitHandle.WaitAny(handles);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="keywordflow">if</span> (result == 0)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                SignalFromThread.Reset();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">        /// Abort the current rendering operation.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> AbortRendering()</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            lock (RenderDataLock)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                unsafe</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                    Cookie* cookie = (Cookie*)Cookie;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    cookie-&gt;abort = 1;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">        /// Get the progress of the current rendering operation.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">        /// &lt;returns&gt;A &lt;see cref=&quot;RenderProgress.ThreadRenderProgress&quot;/&gt; object containing the progress of the current rendering operation.&lt;/returns&gt;</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"></span>        <span class="keyword">public</span> RenderProgress.ThreadRenderProgress GetProgress()</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="keywordtype">int</span> progress;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            ulong maxProgress;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            unsafe</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                Cookie* cookie = (Cookie*)Cookie;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                progress = cookie-&gt;progress;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                maxProgress = cookie-&gt;progress_max;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> RenderProgress.ThreadRenderProgress(progress, maxProgress);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> disposedValue;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> Dispose(<span class="keywordtype">bool</span> disposing)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">if</span> (!disposedValue)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                <span class="keywordflow">if</span> (disposing)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                    DisposeSignal.Set();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                    Thread.Join();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                Marshal.FreeHGlobal(Cookie);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                disposedValue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> Dispose()</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            Dispose(disposing: <span class="keyword">true</span>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            GC.SuppressFinalize(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">    /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">    /// A class that holds the necessary resources to render a page of a MuPDF document using multiple threads.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">    /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html">  268</a></span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html">MuPDFMultiThreadedPageRenderer</a> : IDisposable</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    {<span class="comment"></span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">        /// The display list that is rendered by this renderer.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> readonly MuPDFDisplayList DisplayList;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">        /// The cloned contexts that are used by the &lt;see cref=&quot;RenderingThreads&quot;/&gt; to render the display list.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> readonly <a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_context.html">MuPDFContext</a>[] Contexts;        </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">        /// The &lt;see cref=&quot;RenderingThreads&quot;/&gt; that are in charge of the actual rendering.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> readonly RenderingThread[] RenderingThreads;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">        /// The bounds of the page being rendered.</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> readonly <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a> PageBounds;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">        /// Whether the rendered images should be clipped to the bounds of the page being rendered.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"></span>        <span class="keyword">private</span> readonly <span class="keywordtype">bool</span> ClipToPageBounds;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">        /// The number of threads that are used to render the image.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#a9f2e30c872e3b409af2333aede3503f7">  298</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#a9f2e30c872e3b409af2333aede3503f7">ThreadCount</a> { <span class="keyword">get</span>; }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">        /// Create a new &lt;see cref=&quot;MuPDFMultiThreadedPageRenderer&quot;/&gt; from a specified display list using the specified number of threads.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">        /// &lt;param name=&quot;context&quot;&gt;The context that owns the document from which the display list was extracted.&lt;/param&gt;</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">        /// &lt;param name=&quot;displayList&quot;&gt;The display list to render.&lt;/param&gt;</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">        /// &lt;param name=&quot;threadCount&quot;&gt;The number of threads to use in the rendering. This must be factorisable using only powers of 2, 3, 5 or 7. Otherwise, the biggest number smaller than &lt;paramref name=&quot;threadCount&quot;/&gt; that satisfies this condition is used.&lt;/param&gt;</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">        /// &lt;param name=&quot;pageBounds&quot;&gt;The bounds of the page being rendererd.&lt;/param&gt;</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">        /// &lt;param name=&quot;clipToPageBounds&quot;&gt;A boolean value indicating whether the rendered image should be clipped to the original page&#39;s bounds. This can be relevant if the page has been &quot;cropped&quot; by altering its mediabox, but otherwise leaving the contents untouched.&lt;/param&gt;</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"></span>        <span class="keyword">internal</span> <a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html">MuPDFMultiThreadedPageRenderer</a>(<a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_context.html">MuPDFContext</a> context, MuPDFDisplayList displayList, <span class="keywordtype">int</span> threadCount, <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a> pageBounds, <span class="keywordtype">bool</span> clipToPageBounds)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            threadCount = Utils.GetAcceptableNumber(threadCount);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            this.<a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#a9f2e30c872e3b409af2333aede3503f7">ThreadCount</a> = threadCount;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            this.DisplayList = displayList;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            this.PageBounds = pageBounds;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            this.ClipToPageBounds = clipToPageBounds;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            IntPtr[] contexts = <span class="keyword">new</span> IntPtr[threadCount];</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            GCHandle contextsHandle = GCHandle.Alloc(contexts, GCHandleType.Pinned);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                <a class="code" href="namespace_mu_p_d_f_core.html#aa6919d62a772f0334777d47f9c2d6c59">ExitCodes</a> result = (<a class="code" href="namespace_mu_p_d_f_core.html#aa6919d62a772f0334777d47f9c2d6c59">ExitCodes</a>)NativeMethods.CloneContext(context.NativeContext, threadCount, contextsHandle.AddrOfPinnedObject());</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                <span class="keywordflow">switch</span> (result)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="namespace_mu_p_d_f_core.html#aa6919d62a772f0334777d47f9c2d6c59">ExitCodes</a>.EXIT_SUCCESS:</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="namespace_mu_p_d_f_core.html#aa6919d62a772f0334777d47f9c2d6c59">ExitCodes</a>.ERR_CANNOT_INIT_MUTEX:</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_exception.html">MuPDFException</a>(<span class="stringliteral">&quot;Cannot initalize mutex objects&quot;</span>, result);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="namespace_mu_p_d_f_core.html#aa6919d62a772f0334777d47f9c2d6c59">ExitCodes</a>.ERR_CANNOT_CREATE_CONTEXT:</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_exception.html">MuPDFException</a>(<span class="stringliteral">&quot;Cannot create master context&quot;</span>, result);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="namespace_mu_p_d_f_core.html#aa6919d62a772f0334777d47f9c2d6c59">ExitCodes</a>.ERR_CANNOT_CLONE_CONTEXT:</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_exception.html">MuPDFException</a>(<span class="stringliteral">&quot;Cannot create context clones&quot;</span>, result);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_exception.html">MuPDFException</a>(<span class="stringliteral">&quot;Unknown error&quot;</span>, result);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                Contexts = <span class="keyword">new</span> MuPDFContext[threadCount];</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                RenderingThreads = <span class="keyword">new</span> RenderingThread[threadCount];</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; threadCount; i++)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                    Contexts[i] = <span class="keyword">new</span> MuPDFContext(contexts[i]);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                    RenderingThreads[i] = <span class="keyword">new</span> RenderingThread();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="keywordflow">finally</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                contextsHandle.Free();</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">        /// Render the specified region to an image of the specified size, split in a number of tiles equal to the number of threads used by this &lt;see cref=&quot;MuPDFMultiThreadedPageRenderer&quot;/&gt;, without marshaling. This method will not return until all the rendering threads have finished.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">        /// &lt;param name=&quot;targetSize&quot;&gt;The total size of the image that should be rendered.&lt;/param&gt;</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">        /// &lt;param name=&quot;region&quot;&gt;The region in page units that should be rendered.&lt;/param&gt;</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">        /// &lt;param name=&quot;destinations&quot;&gt;An array containing the addresses of the buffers where the rendered tiles will be written. There must be enough space available in each buffer to write the values for all the pixels of the tile, otherwise this will fail catastrophically!</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">        /// As long as the &lt;paramref name=&quot;targetSize&quot;/&gt; is the same, the size in pixel of the tiles is guaranteed to also be the same.&lt;/param&gt;</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">        /// &lt;param name=&quot;pixelFormat&quot;&gt;The format of the pixel data.&lt;/param&gt;</span></div>
<div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#afb748f194d7f6983f68c475b53943da5">  360</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#afb748f194d7f6983f68c475b53943da5">Render</a>(<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_size.html">RoundedSize</a> targetSize, <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a> region, IntPtr[] destinations, <a class="code" href="namespace_mu_p_d_f_core.html#ade1eb4d4f9c9c8a66bde9152ea9e41bb">PixelFormats</a> pixelFormat)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">if</span> (destinations.Length != Contexts.Length)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentOutOfRangeException(nameof(destinations), destinations.Length, <span class="stringliteral">&quot;The number of destinations must be equal to the number of rendering threads!&quot;</span>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html">RoundedRectangle</a>[] targets = targetSize.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_size.html#a895413d9817ecdff2dc91d5176fe5d5b">Split</a>(destinations.Length);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="keywordtype">float</span> zoomX = targetSize.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_size.html#a5e5954ae76c12cb8a36572be2354aa4b">Width</a> / region.<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a4ea4052094e051b974b7ca1bc9346655">Width</a>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="keywordtype">float</span> zoomY = targetSize.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_size.html#a0c85da598b26dbd5bb66e60af22190de">Height</a> / region.<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a5a06dd7d57268bdf22b5ce741b9dbf4e">Height</a>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <span class="keywordtype">float</span> zoom = (float)Math.Sqrt(zoomX * zoomY);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a> actualPageArea = <span class="keyword">new</span> <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a>(region.<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a7cc750e4547b99f89a6427ab86b99fb3">X0</a>, region.<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a5e3466975ea3adbd9ab7a6920247170b">Y0</a>, region.<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a7cc750e4547b99f89a6427ab86b99fb3">X0</a> + targetSize.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_size.html#a5e5954ae76c12cb8a36572be2354aa4b">Width</a> / zoom, region.<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a5e3466975ea3adbd9ab7a6920247170b">Y0</a> + targetSize.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_size.html#a0c85da598b26dbd5bb66e60af22190de">Height</a> / zoom);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a>[] origins = actualPageArea.<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a9ccdc8935fd5da230eef820881371966">Split</a>(destinations.Length);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <span class="comment">//Make sure that each tile has the expected size in pixel, rounding errors notwithstanding.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; origins.Length; i++)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <span class="keywordtype">int</span> countBlanks = 0;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                <a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html">RoundedRectangle</a> roundedOrigin = origins[i].<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a27cf4d4747a8677f8103746ee3386595">Round</a>(zoom);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                <span class="keywordflow">while</span> (roundedOrigin.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a29904ab0820872c48e43631ece9f1fff">Width</a> != targets[i].<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a29904ab0820872c48e43631ece9f1fff">Width</a> || roundedOrigin.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a73d75f9e5e23910ee0a4078eec4980c9">Height</a> != targets[i].<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a73d75f9e5e23910ee0a4078eec4980c9">Height</a>)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                    <a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html">RoundedRectangle</a> oldRoundedOrigin = roundedOrigin;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                    <span class="keywordflow">if</span> (roundedOrigin.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a29904ab0820872c48e43631ece9f1fff">Width</a> &gt; targets[i].<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a29904ab0820872c48e43631ece9f1fff">Width</a>)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                    {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                        <span class="keywordflow">if</span> (origins[i].X0 &gt; actualPageArea.<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a7cc750e4547b99f89a6427ab86b99fb3">X0</a>)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                        {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                            origins[i] = <span class="keyword">new</span> <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a>(origins[i].X0 + 0.5 / zoom, origins[i].Y0, origins[i].X1, origins[i].Y1);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                        }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                        {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                            origins[i] = <span class="keyword">new</span> <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a>(origins[i].X0, origins[i].Y0, origins[i].X1 - 0.5 / zoom, origins[i].Y1);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                        }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (roundedOrigin.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a29904ab0820872c48e43631ece9f1fff">Width</a> &lt; targets[i].<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a29904ab0820872c48e43631ece9f1fff">Width</a>)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                    {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                        <span class="keywordflow">if</span> (origins[i].X1 &lt; actualPageArea.<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a69c99f6aaf6cfa3ca52a9aab45fb06a0">X1</a>)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                        {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                            origins[i] = <span class="keyword">new</span> <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a>(origins[i].X0, origins[i].Y0, origins[i].X1 + 0.5 / zoom, origins[i].Y1);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                        }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                        {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                            origins[i] = <span class="keyword">new</span> <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a>(origins[i].X0 - 0.5 / zoom, origins[i].Y0, origins[i].X1, origins[i].Y1);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                        }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                    <span class="keywordflow">if</span> (roundedOrigin.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a73d75f9e5e23910ee0a4078eec4980c9">Height</a> &gt; targets[i].<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a73d75f9e5e23910ee0a4078eec4980c9">Height</a>)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                    {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                        <span class="keywordflow">if</span> (origins[i].Y0 &gt; actualPageArea.<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a5e3466975ea3adbd9ab7a6920247170b">Y0</a>)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                        {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                            origins[i] = <span class="keyword">new</span> <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a>(origins[i].X0, origins[i].Y0 + 0.5 / zoom, origins[i].X1, origins[i].Y1);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                        }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                        {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                            origins[i] = <span class="keyword">new</span> <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a>(origins[i].X0, origins[i].Y0, origins[i].X1, origins[i].Y1 - 0.5 / zoom);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                        }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                    }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (roundedOrigin.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a73d75f9e5e23910ee0a4078eec4980c9">Height</a> &lt; targets[i].<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a73d75f9e5e23910ee0a4078eec4980c9">Height</a>)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                    {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                        <span class="keywordflow">if</span> (origins[i].X1 &lt; actualPageArea.<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a69c99f6aaf6cfa3ca52a9aab45fb06a0">X1</a>)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                        {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                            origins[i] = <span class="keyword">new</span> <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a>(origins[i].X0, origins[i].Y0, origins[i].X1, origins[i].Y1 + 0.5 / zoom);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                        }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                        {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                            origins[i] = <span class="keyword">new</span> <a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html">Rectangle</a>(origins[i].X0, origins[i].Y0 - 0.5 / zoom, origins[i].X1, origins[i].Y1);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                        }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    roundedOrigin = origins[i].<a class="code" href="struct_mu_p_d_f_core_1_1_rectangle.html#a27cf4d4747a8677f8103746ee3386595">Round</a>(zoom);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                    <span class="keywordflow">if</span> (roundedOrigin.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a29904ab0820872c48e43631ece9f1fff">Width</a> == oldRoundedOrigin.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a29904ab0820872c48e43631ece9f1fff">Width</a> &amp;&amp; roundedOrigin.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a73d75f9e5e23910ee0a4078eec4980c9">Height</a> == oldRoundedOrigin.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a73d75f9e5e23910ee0a4078eec4980c9">Height</a> &amp;&amp; (roundedOrigin.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a29904ab0820872c48e43631ece9f1fff">Width</a> != targets[i].<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a29904ab0820872c48e43631ece9f1fff">Width</a> || roundedOrigin.<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a73d75f9e5e23910ee0a4078eec4980c9">Height</a> != targets[i].<a class="code" href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a73d75f9e5e23910ee0a4078eec4980c9">Height</a>))</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                    {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                        countBlanks++;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                    <span class="keywordflow">if</span> (countBlanks &gt;= 100)</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                        <span class="comment">//It seems that we can&#39;t coerce the expected size and the actual size to be the same. Give up.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                    }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="comment">//Start each rendering thread.</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; destinations.Length; i++)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                RenderingThreads[i].Render(Contexts[i].NativeContext, DisplayList, origins[i], zoom, destinations[i], pixelFormat, this.PageBounds, ClipToPageBounds);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="comment">//Wait until all the rendering threads have finished.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; destinations.Length; i++)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                RenderingThreads[i].WaitForRendering();</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">        /// Signal to the rendering threads that they should abort rendering as soon as possible.</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#a05eca723202ae5ca1b535b8fe32ef405">  465</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#a05eca723202ae5ca1b535b8fe32ef405">Abort</a>()</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; RenderingThreads.Length; i++)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                RenderingThreads[i].AbortRendering();</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">        /// Get the current rendering progress of all the threads.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">        /// &lt;returns&gt;A &lt;see cref=&quot;RenderProgress&quot;/&gt; object containing the rendering progress of all the threads.&lt;/returns&gt;</span></div>
<div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#ab3967195e249f10b89eadaeed551a409">  477</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="class_mu_p_d_f_core_1_1_render_progress.html">RenderProgress</a> <a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#ab3967195e249f10b89eadaeed551a409">GetProgress</a>()</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_mu_p_d_f_core_1_1_render_progress.html">RenderProgress</a>((from el in RenderingThreads select el.GetProgress()).ToArray());</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> disposedValue;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">        ///&lt;inheritdoc/&gt;</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"></span>        <span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> Dispose(<span class="keywordtype">bool</span> disposing)</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <span class="keywordflow">if</span> (!disposedValue)</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                <span class="keywordflow">if</span> (disposing)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    <a class="code" href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#a05eca723202ae5ca1b535b8fe32ef405">Abort</a>();</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                    <span class="keywordflow">if</span> (RenderingThreads != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                    {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; RenderingThreads.Length; i++)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                        {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                            RenderingThreads[i].Dispose();</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                        }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                    <span class="keywordflow">if</span> (Contexts != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                    {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Contexts.Length; i++)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                        {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                            Contexts[i].Dispose();</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                        }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                    }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                disposedValue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">        ///&lt;inheritdoc/&gt;</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> Dispose()</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            Dispose(disposing: <span class="keyword">true</span>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            GC.SuppressFinalize(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclass_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer_html"><div class="ttname"><a href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html">MuPDFCore.MuPDFMultiThreadedPageRenderer</a></div><div class="ttdoc">A class that holds the necessary resources to render a page of a MuPDF document using multiple thread...</div><div class="ttdef"><b>Definition:</b> <a href="_mu_p_d_f_multi_threaded_page_renderer_8cs_source.html#l00268">MuPDFMultiThreadedPageRenderer.cs:269</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rectangle_html_a7cc750e4547b99f89a6427ab86b99fb3"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rectangle.html#a7cc750e4547b99f89a6427ab86b99fb3">MuPDFCore.Rectangle.X0</a></div><div class="ttdeci">float X0</div><div class="ttdoc">The left coordinate of the rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00331">Rectangles.cs:331</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rounded_size_html_a895413d9817ecdff2dc91d5176fe5d5b"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rounded_size.html#a895413d9817ecdff2dc91d5176fe5d5b">MuPDFCore.RoundedSize.Split</a></div><div class="ttdeci">RoundedRectangle[] Split(int divisions)</div><div class="ttdoc">Split the size into the specified number of RoundedRectangles.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00209">Rectangles.cs:209</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rectangle_html_a27cf4d4747a8677f8103746ee3386595"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rectangle.html#a27cf4d4747a8677f8103746ee3386595">MuPDFCore.Rectangle.Round</a></div><div class="ttdeci">RoundedRectangle Round()</div><div class="ttdoc">Round the rectangle's coordinates to the closest integers.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00392">Rectangles.cs:392</a></div></div>
<div class="ttc" id="aclass_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer_html_afb748f194d7f6983f68c475b53943da5"><div class="ttname"><a href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#afb748f194d7f6983f68c475b53943da5">MuPDFCore.MuPDFMultiThreadedPageRenderer.Render</a></div><div class="ttdeci">void Render(RoundedSize targetSize, Rectangle region, IntPtr[] destinations, PixelFormats pixelFormat)</div><div class="ttdoc">Render the specified region to an image of the specified size, split in a number of tiles equal to th...</div><div class="ttdef"><b>Definition:</b> <a href="_mu_p_d_f_multi_threaded_page_renderer_8cs_source.html#l00360">MuPDFMultiThreadedPageRenderer.cs:360</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rounded_rectangle_html_a29904ab0820872c48e43631ece9f1fff"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a29904ab0820872c48e43631ece9f1fff">MuPDFCore.RoundedRectangle.Width</a></div><div class="ttdeci">int Width</div><div class="ttdoc">The width of the rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00500">Rectangles.cs:500</a></div></div>
<div class="ttc" id="aclass_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer_html_a9f2e30c872e3b409af2333aede3503f7"><div class="ttname"><a href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#a9f2e30c872e3b409af2333aede3503f7">MuPDFCore.MuPDFMultiThreadedPageRenderer.ThreadCount</a></div><div class="ttdeci">int ThreadCount</div><div class="ttdoc">The number of threads that are used to render the image.</div><div class="ttdef"><b>Definition:</b> <a href="_mu_p_d_f_multi_threaded_page_renderer_8cs_source.html#l00298">MuPDFMultiThreadedPageRenderer.cs:298</a></div></div>
<div class="ttc" id="aclass_mu_p_d_f_core_1_1_mu_p_d_f_context_html"><div class="ttname"><a href="class_mu_p_d_f_core_1_1_mu_p_d_f_context.html">MuPDFCore.MuPDFContext</a></div><div class="ttdoc">A wrapper around a MuPDF context object, which contains the exception stack and the resource cache st...</div><div class="ttdef"><b>Definition:</b> <a href="_mu_p_d_f_context_8cs_source.html#l00025">MuPDFContext.cs:26</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_cookie_html"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_cookie.html">MuPDFCore.Cookie</a></div><div class="ttdoc">A struct to hold information about the current rendering process and to abort rendering as needed.</div><div class="ttdef"><b>Definition:</b> <a href="_mu_p_d_f_8cs_source.html#l00247">MuPDF.cs:248</a></div></div>
<div class="ttc" id="aclass_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer_html_ab3967195e249f10b89eadaeed551a409"><div class="ttname"><a href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#ab3967195e249f10b89eadaeed551a409">MuPDFCore.MuPDFMultiThreadedPageRenderer.GetProgress</a></div><div class="ttdeci">RenderProgress GetProgress()</div><div class="ttdoc">Get the current rendering progress of all the threads.</div><div class="ttdef"><b>Definition:</b> <a href="_mu_p_d_f_multi_threaded_page_renderer_8cs_source.html#l00477">MuPDFMultiThreadedPageRenderer.cs:477</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rectangle_html_a5a06dd7d57268bdf22b5ce741b9dbf4e"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rectangle.html#a5a06dd7d57268bdf22b5ce741b9dbf4e">MuPDFCore.Rectangle.Height</a></div><div class="ttdeci">float Height</div><div class="ttdoc">The height of the rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00356">Rectangles.cs:356</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rounded_rectangle_html"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html">MuPDFCore.RoundedRectangle</a></div><div class="ttdoc">Represents a rectangle using only integer numbers.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00475">Rectangles.cs:476</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rectangle_html_a5e3466975ea3adbd9ab7a6920247170b"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rectangle.html#a5e3466975ea3adbd9ab7a6920247170b">MuPDFCore.Rectangle.Y0</a></div><div class="ttdeci">float Y0</div><div class="ttdoc">The top coordinate of the rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00336">Rectangles.cs:336</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rounded_size_html_a0c85da598b26dbd5bb66e60af22190de"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rounded_size.html#a0c85da598b26dbd5bb66e60af22190de">MuPDFCore.RoundedSize.Height</a></div><div class="ttdeci">int Height</div><div class="ttdoc">The height of the rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00191">Rectangles.cs:191</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rectangle_html_a9ccdc8935fd5da230eef820881371966"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rectangle.html#a9ccdc8935fd5da230eef820881371966">MuPDFCore.Rectangle.Split</a></div><div class="ttdeci">Rectangle[] Split(int divisions)</div><div class="ttdoc">Split the rectangle into the specified number of Rectangles.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00422">Rectangles.cs:422</a></div></div>
<div class="ttc" id="aclass_mu_p_d_f_core_1_1_render_progress_html"><div class="ttname"><a href="class_mu_p_d_f_core_1_1_render_progress.html">MuPDFCore.RenderProgress</a></div><div class="ttdoc">Holds a summery of the progress of the current rendering operation.</div><div class="ttdef"><b>Definition:</b> <a href="_mu_p_d_f_8cs_source.html#l00259">MuPDF.cs:260</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rounded_size_html_a5e5954ae76c12cb8a36572be2354aa4b"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rounded_size.html#a5e5954ae76c12cb8a36572be2354aa4b">MuPDFCore.RoundedSize.Width</a></div><div class="ttdeci">int Width</div><div class="ttdoc">The width of the rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00186">Rectangles.cs:186</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rectangle_html"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rectangle.html">MuPDFCore.Rectangle</a></div><div class="ttdoc">Represents a rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00326">Rectangles.cs:327</a></div></div>
<div class="ttc" id="anamespace_mu_p_d_f_core_html_aa6919d62a772f0334777d47f9c2d6c59"><div class="ttname"><a href="namespace_mu_p_d_f_core.html#aa6919d62a772f0334777d47f9c2d6c59">MuPDFCore.ExitCodes</a></div><div class="ttdeci">ExitCodes</div><div class="ttdoc">Exit codes returned by native methods describing various errors that can occur.</div><div class="ttdef"><b>Definition:</b> <a href="_mu_p_d_f_8cs_source.html#l00026">MuPDF.cs:27</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rounded_rectangle_html_a73d75f9e5e23910ee0a4078eec4980c9"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rounded_rectangle.html#a73d75f9e5e23910ee0a4078eec4980c9">MuPDFCore.RoundedRectangle.Height</a></div><div class="ttdeci">int Height</div><div class="ttdoc">The height of the rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00505">Rectangles.cs:505</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rounded_size_html"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rounded_size.html">MuPDFCore.RoundedSize</a></div><div class="ttdoc">Represents the size of a rectangle using only integer numbers.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00181">Rectangles.cs:182</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rectangle_html_a69c99f6aaf6cfa3ca52a9aab45fb06a0"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rectangle.html#a69c99f6aaf6cfa3ca52a9aab45fb06a0">MuPDFCore.Rectangle.X1</a></div><div class="ttdeci">float X1</div><div class="ttdoc">The right coordinate of the rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00341">Rectangles.cs:341</a></div></div>
<div class="ttc" id="anamespace_mu_p_d_f_core_html"><div class="ttname"><a href="namespace_mu_p_d_f_core.html">MuPDFCore</a></div><div class="ttdef"><b>Definition:</b> <a href="_mu_p_d_f_8cs_source.html#l00021">MuPDF.cs:22</a></div></div>
<div class="ttc" id="astruct_mu_p_d_f_core_1_1_rectangle_html_a4ea4052094e051b974b7ca1bc9346655"><div class="ttname"><a href="struct_mu_p_d_f_core_1_1_rectangle.html#a4ea4052094e051b974b7ca1bc9346655">MuPDFCore.Rectangle.Width</a></div><div class="ttdeci">float Width</div><div class="ttdoc">The width of the rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="_rectangles_8cs_source.html#l00351">Rectangles.cs:351</a></div></div>
<div class="ttc" id="aclass_mu_p_d_f_core_1_1_mu_p_d_f_exception_html"><div class="ttname"><a href="class_mu_p_d_f_core_1_1_mu_p_d_f_exception.html">MuPDFCore.MuPDFException</a></div><div class="ttdoc">The exception that is thrown when a MuPDF operation fails.</div><div class="ttdef"><b>Definition:</b> <a href="_mu_p_d_f_8cs_source.html#l00342">MuPDF.cs:343</a></div></div>
<div class="ttc" id="anamespace_mu_p_d_f_core_html_ade1eb4d4f9c9c8a66bde9152ea9e41bb"><div class="ttname"><a href="namespace_mu_p_d_f_core.html#ade1eb4d4f9c9c8a66bde9152ea9e41bb">MuPDFCore.PixelFormats</a></div><div class="ttdeci">PixelFormats</div><div class="ttdoc">Pixel formats supported by the library.</div><div class="ttdef"><b>Definition:</b> <a href="_mu_p_d_f_8cs_source.html#l00220">MuPDF.cs:221</a></div></div>
<div class="ttc" id="aclass_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer_html_a05eca723202ae5ca1b535b8fe32ef405"><div class="ttname"><a href="class_mu_p_d_f_core_1_1_mu_p_d_f_multi_threaded_page_renderer.html#a05eca723202ae5ca1b535b8fe32ef405">MuPDFCore.MuPDFMultiThreadedPageRenderer.Abort</a></div><div class="ttdeci">void Abort()</div><div class="ttdoc">Signal to the rendering threads that they should abort rendering as soon as possible.</div><div class="ttdef"><b>Definition:</b> <a href="_mu_p_d_f_multi_threaded_page_renderer_8cs_source.html#l00465">MuPDFMultiThreadedPageRenderer.cs:465</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d84f90bba075742c2a9090e1ba7aabcd.html">MuPDFCore</a></li><li class="navelem"><b>MuPDFMultiThreadedPageRenderer.cs</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
